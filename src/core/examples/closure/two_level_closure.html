<!DOCTYPE html>
<!--
	This example shows that closures can access variable one level AND MORE. all up to the global scope.

	Mark Veltzer <mark.veltzer@gmail.com>
-->
<html>
	<head>
		<title>Title</title>
		<script>
			function stats_collector() {
				var stats=[];
				function collect(y) {
					stats.push(y);
				}
				function variance() {
					function sum() {
						var mysum=0;
						for(var i=0;i<stats.length;i++) {
							mysum+=stats[i];
						}
						return mysum;
					}
					function sum_square() {
						var mysum=0;
						for(var i=0;i<stats.length;i++) {
							mysum+=stats[i]*stats[i];
						}
						return mysum;
					}
					return (sum_square()-sum())/stats.length;
				}
				return {
					collect:collect,
					variance:variance
				};
			}
			var sc=stats_collector();
			sc.collect(8);
			document.write(sc.variance()+"<br>");
			sc.collect(13);
			document.write(sc.variance()+"<br>");
		</script>
	</head>
	<body>
	</body>
</html>
