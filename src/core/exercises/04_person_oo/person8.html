<!DOCTYPE html>
<html>
	<head>
		<title>Title</title>
		<script>

		/*
			Flyweight design pattern in JavaScript
		*/

		function Person() {
			Person.prototype.count++;
		}
		Person.prototype.count=0;
		Person.prototype.name="Bilbo";
		Person.prototype.age=111;
		Person.prototype.getName=function() {
			return this.name;
		};
		Person.prototype.setName=function(iname) {
			this.name=iname;
		};
		Person.prototype.getFullName=function() {
			return this.name+" "+this.age;
		};
		Person.prototype.printSelf=function() {
			document.write(this.getFullName());
		};
		Person.prototype.toString=function() {
			var s="";
			for(var key in this) {
				if(typeof(this[key])!="function") {
					s+=key+": "+this[key]+"<br/>";
				}
			}
			return s;
		};

		// This is the client code
		document.write("number of persons is "+Person.prototype.count+"<br/>");
		var p1=new Person();
		document.write(p1+"<br/>");
		p1.setName("Frodo");
		p1.setAge(33);
		var p2=new Person();
		document.write(p1+"<br/>"+p2+"<br/>");
		document.write("number of persons is "+Person.prototype.count+"<br/>");
		document.write("lets see if we can do this "+p1.count+"<br/>");
		</script>
	</head>
	<body>
	</body>
</html>
